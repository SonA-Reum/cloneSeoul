<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        $(document).ready(function () {
    let $activeSlide = $(); // í™œì„±í™”ëœ ìŠ¬ë¼ì´ë“œ
    let $totalSlide = 0; // ì´ ìŠ¬ë¼ì´ë“œ ê°œìˆ˜
    let $currentSlide = 0; // í˜„ì¬ ìŠ¬ë¼ì´ë“œ í˜ì´ì§€
    let $num = 0;
    let $control = $();
    let $ctrlNum = 0; // ì»¨íŠ¸ë¡¤ëŸ¬ ê°¯ìˆ˜
    let $activeBtn = $();

    /** ğŸ”¹ ìŠ¬ë¼ì´ë“œ ì„ íƒ ë²„íŠ¼ í´ë¦­ or í¬ì»¤ìŠ¤ ì‹œ ìŠ¬ë¼ì´ë“œ í™œì„±í™” */
    $(".slide--sel-btn").on("focus click", function () {
        $(".slide--sel-btn").removeClass("active");
        $(this).addClass("active");
        $activeSlide = $(this).next("div").find(".slide"); // í™œì„±í™”ëœ ìŠ¬ë¼ì´ë“œ ì„ íƒ
        $activeBtn = $(this); // í˜„ì¬ í™œì„±í™”ëœ ë²„íŠ¼ ì €ì¥

        // **Slickì´ ì´ˆê¸°í™”ë˜ì—ˆëŠ”ì§€ í™•ì¸ í›„ ì‹¤í–‰**
        if ($activeSlide.length && $activeSlide.hasClass("slick-initialized")) {
            $totalSlide = $activeSlide.slick("getSlick").slideCount;
            $currentSlide = $activeSlide.slick("slickCurrentSlide");
            $num = $totalSlide;
        }

        // **ì»¨íŠ¸ë¡¤ëŸ¬ ìš”ì†Œ ì°¾ê¸° (ìŠ¬ë¼ì´ë“œ ë³€ê²½ ì‹œ ì—…ë°ì´íŠ¸)**
        $control = $activeSlide.closest('ul').next("div").find(".slide-prev, .slide-pause, .slide-play, .slide-next, button");
        $ctrlNum = 0;
    });

    /** ğŸ”¹ í‚¤ë³´ë“œ íƒ­(Tab) ì´ë™ ì²˜ë¦¬ */
    $(document).on("keydown", function (event) {
        if (event.key === "Tab") {
            event.preventDefault();
            if (event.shiftKey) {
                movePrev(); // Shift + Tab
            } else {
                tabSlide(); // ì¼ë°˜ Tab
            }
        }
    });

    /** ğŸ”¹ Tab í‚¤ë¥¼ ëˆŒëŸ¬ ìŠ¬ë¼ì´ë“œ ì´ë™ or ì»¨íŠ¸ë¡¤ ë²„íŠ¼ìœ¼ë¡œ ì´ë™ */
    function tabSlide() {
        if ($num > 0) {
            // **ë‹¤ìŒ ìŠ¬ë¼ì´ë“œ ì´ë™**
            $activeSlide.slick("slickNext");
            $num--;
        } else {
            // **ì»¨íŠ¸ë¡¤ëŸ¬ ë²„íŠ¼ìœ¼ë¡œ í¬ì»¤ìŠ¤ ì´ë™**
            controlTurn();
        }
    }

    /** ğŸ”¹ ì»¨íŠ¸ë¡¤ëŸ¬ ë²„íŠ¼ ìˆœì°¨ì ìœ¼ë¡œ ì´ë™ */
    function controlTurn() {
        if ($ctrlNum < $control.length) {
            $control.eq($ctrlNum).focus();
            $ctrlNum++;
        } else {
            // **ë‹¤ìŒ ìŠ¬ë¼ì´ë“œ ë²„íŠ¼ìœ¼ë¡œ ì´ë™**
            let $nextSlideBtn = $activeBtn.closest('.slide__group').next().find('.slide--sel-btn');
            if ($nextSlideBtn.length) {
                $(".slide--sel-btn").removeClass("active");
                $nextSlideBtn.addClass("active").focus();
            }
        }
    }

    /** ğŸ”¹ Shift + Tab í‚¤ë¥¼ ëˆŒëŸ¬ ì´ì „ ìš”ì†Œë¡œ ì´ë™ */
    function movePrev() {
        if (!$(document.activeElement).closest('.slide--ctl--nav').length) {
            // **ì»¨íŠ¸ë¡¤ëŸ¬ ë°–ì´ë©´ ì´ì „ ìŠ¬ë¼ì´ë“œ ë²„íŠ¼ìœ¼ë¡œ ì´ë™**
            let $prevSlideBtn = $activeBtn.closest('.slide__group').prev().find('.slide--sel-btn');
            if ($prevSlideBtn.length) {
                $(".slide--sel-btn").removeClass("active");
                $prevSlideBtn.addClass("active").focus();
            }
            return;
        }

        if ($ctrlNum > 0) {
            // **ì»¨íŠ¸ë¡¤ëŸ¬ ë²„íŠ¼ ì—­ìˆœ ì´ë™**
            $ctrlNum--;
            $control.eq($ctrlNum).focus();
        } else {
            // **ì»¨íŠ¸ë¡¤ëŸ¬ ì²« ìš”ì†Œì—ì„œ ë‹¤ì‹œ ìŠ¬ë¼ì´ë“œ ë‚´ë¶€ë¡œ í¬ì»¤ìŠ¤ ì´ë™**
            if ($num < $totalSlide) {
                $activeSlide.slick("slickPrev");
                $num++;
            }
        }
    }
});

    </script>
</body>
</html>